<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Ink</title>
  <link rel="stylesheet" href="./assets/style.css?3" />
  <style>/* Background */ .chroma { background-color: #f7f7f7; -moz-tab-size: 4; -o-tab-size: 4; tab-size: 4 }
/* Error */ .chroma .err {  }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #dedede }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* Keyword */ .chroma .k { font-weight: bold }
/* KeywordConstant */ .chroma .kc { font-weight: bold }
/* KeywordDeclaration */ .chroma .kd { font-weight: bold }
/* KeywordNamespace */ .chroma .kn { font-weight: bold }
/* KeywordPseudo */ .chroma .kp {  }
/* KeywordReserved */ .chroma .kr { font-weight: bold }
/* KeywordType */ .chroma .kt {  }
/* NameClass */ .chroma .nc { font-weight: bold }
/* NameEntity */ .chroma .ni { font-weight: bold }
/* NameException */ .chroma .ne { font-weight: bold }
/* NameNamespace */ .chroma .nn { font-weight: bold }
/* NameTag */ .chroma .nt { font-weight: bold }
/* LiteralString */ .chroma .s { font-style: italic }
/* LiteralStringAffix */ .chroma .sa { font-style: italic }
/* LiteralStringBacktick */ .chroma .sb { font-style: italic }
/* LiteralStringChar */ .chroma .sc { font-style: italic }
/* LiteralStringDelimiter */ .chroma .dl { font-style: italic }
/* LiteralStringDoc */ .chroma .sd { font-style: italic }
/* LiteralStringDouble */ .chroma .s2 { font-style: italic }
/* LiteralStringEscape */ .chroma .se { font-weight: bold; font-style: italic }
/* LiteralStringHeredoc */ .chroma .sh { font-style: italic }
/* LiteralStringInterpol */ .chroma .si { font-weight: bold; font-style: italic }
/* LiteralStringOther */ .chroma .sx { font-style: italic }
/* LiteralStringRegex */ .chroma .sr { font-style: italic }
/* LiteralStringSingle */ .chroma .s1 { font-style: italic }
/* LiteralStringSymbol */ .chroma .ss { font-style: italic }
/* OperatorWord */ .chroma .ow { font-weight: bold }
/* Comment */ .chroma .c { font-style: italic }
/* CommentHashbang */ .chroma .ch { font-style: italic }
/* CommentMultiline */ .chroma .cm { font-style: italic }
/* CommentSingle */ .chroma .c1 { font-style: italic }
/* CommentSpecial */ .chroma .cs { font-style: italic }
/* CommentPreproc */ .chroma .cp {  }
/* CommentPreprocFile */ .chroma .cpf {  }
/* GenericEmph */ .chroma .ge { font-style: italic }
/* GenericHeading */ .chroma .gh { font-weight: bold }
/* GenericPrompt */ .chroma .gp { font-weight: bold }
/* GenericStrong */ .chroma .gs { font-weight: bold }
/* GenericSubheading */ .chroma .gu { font-weight: bold }
</style>
</head>

<body>
<h1>Ink</h1>

<div>
  <p>This is a quick and dirty introduction to Ink: a framework for 2D graphics in Go, focused on creative coding, and based on OpenGL.</p>

  <p><em>Disclaimer:</em> Although I've been working towards Ink for years, the project is still very young in many ways. There are many TODOs, bugs, and ugly APIs. I will rewrite and break and (hopefully) improve things over time.</p>


  <p>There's more that doesn't have examples here. Check out the <a href="https://godoc.org/github.com/buchanae/ink">docs</a>, the <a href="https://github.com/buchanae/ink/tree/master/sketches">sketches directory</a>, or just browse through <a href="https://github.com/buchanae/ink">the code</a>.</p>
</div>


<section>
  <h2>Usage</h2>

  <div>
    <p>You'll need <a href="https://golang.org/">Go</a> installed. These docs assume the reader is familiar with programming in Go.</p>

    <p>Ink relies on <a href="">GLFW</a>, which is built using CGO, so you'll probably need some libraries installed:</p>

    <p><strong>Linux: </strong> you'll need the build-essential, xorg-dev, and libglfw3-dev pacakges</p>

    <p><strong>Mac: </strong> you'll need xcode installed</p>

    <p><strong>Windows: </strong> untested</p>

    <p>Install ink:</p>
    <p><span class="incode">go get github.com/buchanae/ink</span></p>

    <p>(I'm <em>pretty</em> sure that should work, but if it doesn't please let me know by <a href="https://github.com/buchanae/ink/issues/new">filing a github issue</a>. If nothing else, you can clone the code and run <span class="incode">go install .</span> from the root directory.)</p>

    <p>Use the "ink" CLI to run a sketch file. This will open a window, draw the sketch, and watch for changes.</p>

    <p><span class="incode">ink example.go</span></p>
  </div>
</section>


<section>
  <h2>Hello, Triangle</h2>
  <p>The "hello, world" of graphics: a triangle with different colored vertices.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="c1">// The &#34;hello, world&#34; of graphics:
</span><span class="c1"></span>	<span class="c1">// a triangle with different colored vertices.
</span><span class="c1"></span>	<span class="nx">t</span> <span class="o">:=</span> <span class="nx">Triangle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="p">[</span><span class="p">]</span><span class="nx">RGBA</span><span class="p">{</span>
		<span class="nx">Red</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Blue</span><span class="p">,</span>
	<span class="p">}</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/001_triangle.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Basic Shapes</h2>
  <p>The "dd" package holds 2D geometry types. The "gfx" package holds operations like "Fill", "Stroke", etc.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">shapes</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Meshable</span><span class="p">{</span>

		<span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Circle</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">:</span>     <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">Radius</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Triangle</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.7</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.8</span><span class="p">,</span> <span class="mf">.3</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Ellipse</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">:</span>   <span class="nx">XY</span><span class="p">{</span><span class="mf">.2</span><span class="p">,</span> <span class="mf">.2</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">Size</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.15</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Quad</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">s</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">shapes</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">s</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Blue</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/002_shapes.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Rotate</h2>
  <p>Rotate a shape using OpenGL.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_pivot&#34;</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Center</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_rot&#34;</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Red</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/004_rotate.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Paths</h2>
  <p>Draw paths using a Pen.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">pen</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Pen</span><span class="p">{</span><span class="p">}</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">MoveTo</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Line</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Line</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Line</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="o">-</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Line</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Close</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">pen</span><span class="p">.</span><span class="nf">MoveTo</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">QuadraticTo</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">QuadraticTo</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">)</span>
	<span class="nx">pen</span><span class="p">.</span><span class="nf">Close</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">shapes</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Strokeable</span><span class="p">{</span>
		<span class="nx">pen</span><span class="p">,</span>

		<span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Circle</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">:</span>     <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">Radius</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Triangle</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.7</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.8</span><span class="p">,</span> <span class="mf">.3</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Ellipse</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">:</span>   <span class="nx">XY</span><span class="p">{</span><span class="mf">.2</span><span class="p">,</span> <span class="mf">.2</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">Size</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.15</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="nx">Quad</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.85</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">s</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">shapes</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">s</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Red</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.002</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/005_path.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Blue Noise</h2>
  <p>Generate evenly spaced random points.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
		<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.9</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">r</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Lightgray</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="nx">bn</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nx">BlueNoise</span><span class="p">{</span>
		<span class="nx">Limit</span><span class="p">:</span> <span class="mi">5050</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span>  <span class="nx">r</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">xys</span> <span class="o">:=</span> <span class="nx">bn</span><span class="p">.</span><span class="nf">Generate</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">xy</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">xys</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Dot</span><span class="p">{</span><span class="nx">XY</span><span class="p">:</span> <span class="nx">xy</span><span class="p">,</span> <span class="nx">Radius</span><span class="p">:</span> <span class="mf">0.003</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/006_blue_noise.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Grid</h2>
  <p>Grids are useful for laying out shapes in a grid pattern.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span><span class="nx">Rows</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
	<span class="nx">palette</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.003</span><span class="p">)</span>
		<span class="nx">c</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">palette</span><span class="p">)</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">r</span><span class="p">,</span> <span class="nx">c</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/007_grid.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Triangulation</h2>
  <p>Turn a set of points into triangles.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/tess&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">xys</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">XY</span><span class="p">{</span>
		<span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">tris</span> <span class="o">:=</span> <span class="nx">tess</span><span class="p">.</span><span class="nf">Tesselate</span><span class="p">(</span><span class="nx">xys</span><span class="p">)</span>
	<span class="nx">m</span> <span class="o">:=</span> <span class="nf">Triangles</span><span class="p">(</span><span class="nx">tris</span><span class="p">)</span>
	<span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">xy</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">xys</span> <span class="p">{</span>
		<span class="nx">d</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Dot</span><span class="p">{</span><span class="nx">XY</span><span class="p">:</span> <span class="nx">xy</span><span class="p">,</span> <span class="nx">Color</span><span class="p">:</span> <span class="nx">Red</span><span class="p">,</span> <span class="nx">Radius</span><span class="p">:</span> <span class="mf">0.005</span><span class="p">}</span>
		<span class="nx">d</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/009_tesselation.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Gradient</h2>
  <p></p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Gradient</span><span class="p">{</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="nx">A</span><span class="p">:</span> <span class="nx">Blue</span><span class="p">,</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">Red</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/010_gradient.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Blur</h2>
  <p>Gaussian blur.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
		<span class="nx">Mesh</span><span class="p">:</span> <span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="nx">Color</span><span class="p">:</span> <span class="nx">Blue</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Blur</span><span class="p">{</span>
		<span class="nx">Passes</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
		<span class="nx">Source</span><span class="p">:</span> <span class="nx">doc</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/013_blur.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Noise</h2>
  <p>Generate perlin (simplex?) noise using OpenGL.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">n</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">DefaultNoise</span>
	<span class="nx">n</span><span class="p">.</span><span class="nx">Size</span> <span class="p">=</span> <span class="mi">30</span>
	<span class="nx">n</span><span class="p">.</span><span class="nx">Color</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Red</span>
	<span class="nx">n</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/014_noise.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Tweak</h2>
  <p>Tweak the vertices of a mesh, to give it some character.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">c</span> <span class="o">:=</span> <span class="nx">Circle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">:</span>       <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">Radius</span><span class="p">:</span>   <span class="mf">0.3</span><span class="p">,</span>
		<span class="nx">Segments</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">m</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nf">Mesh</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">m</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">TweakMesh</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">)</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">m</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Red</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/015_tweak.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Image</h2>
  <p>Display an image (currently only PNG?)</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">img</span> <span class="o">:=</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">LoadImage</span><span class="p">(</span><span class="s">&#34;toshiro.png&#34;</span><span class="p">)</span>
	<span class="nx">img</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/016_image.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Opacity</h2>
  <p>Testing opacity and blending (a tricky thing to get right, so it's probably wrong...)</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">fills</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>

		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="p">{</span>
			<span class="nx">Rect</span><span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">RGBA</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">f</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">fills</span> <span class="p">{</span>
		<span class="nx">f</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/017_opacity.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Instancing</h2>
  <p>Generate thousands of instances of the same shape efficiently using OpenGL.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="kd">const</span> <span class="nx">N</span> <span class="p">=</span> <span class="mi">100000</span>

	<span class="nx">pos</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="nx">XY</span><span class="p">,</span> <span class="nx">N</span><span class="p">)</span>
	<span class="nx">rot</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kt">float32</span><span class="p">,</span> <span class="nx">N</span><span class="p">)</span>
	<span class="nx">colors</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="nx">RGBA</span><span class="p">,</span> <span class="nx">N</span><span class="p">)</span>
	<span class="nx">palette</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">pos</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">XYRange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span>
		<span class="nx">rot</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Angle</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">colors</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">palette</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">doc</span><span class="p">.</span><span class="nf">AddShader</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Shader</span><span class="p">{</span>
		<span class="nx">Vert</span><span class="p">:</span>      <span class="nx">gfx</span><span class="p">.</span><span class="nx">DefaultVert</span><span class="p">,</span>
		<span class="nx">Frag</span><span class="p">:</span>      <span class="nx">gfx</span><span class="p">.</span><span class="nx">DefaultFrag</span><span class="p">,</span>
		<span class="nx">Instances</span><span class="p">:</span> <span class="nx">N</span><span class="p">,</span>
		<span class="nx">Mesh</span><span class="p">:</span>      <span class="nf">RectWH</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">Attrs</span><span class="p">:</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Attrs</span><span class="p">{</span>
			<span class="s">&#34;a_pos&#34;</span><span class="p">:</span>   <span class="nx">pos</span><span class="p">,</span>
			<span class="s">&#34;a_rot&#34;</span><span class="p">:</span>   <span class="nx">rot</span><span class="p">,</span>
			<span class="s">&#34;a_color&#34;</span><span class="p">:</span> <span class="nx">colors</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="nx">Divisors</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span>
			<span class="s">&#34;a_pos&#34;</span><span class="p">:</span>   <span class="mi">1</span><span class="p">,</span>
			<span class="s">&#34;a_rot&#34;</span><span class="p">:</span>   <span class="mi">1</span><span class="p">,</span>
			<span class="s">&#34;a_color&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
	<span class="p">}</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/018_instancing.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Window Size</h2>
  <p>Change the window size from the sketch code.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">doc</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">Window</span><span class="p">.</span><span class="nx">Width</span> <span class="p">=</span> <span class="mi">300</span>
	<span class="nx">doc</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">Window</span><span class="p">.</span><span class="nx">Height</span> <span class="p">=</span> <span class="mi">300</span>

	<span class="nx">t</span> <span class="o">:=</span> <span class="nx">Triangle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="p">[</span><span class="p">]</span><span class="nx">RGBA</span><span class="p">{</span>
		<span class="nx">Red</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Blue</span><span class="p">,</span>
	<span class="p">}</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/019_window_size.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Hex Color</h2>
  <p>Convert hex to a color.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">t</span> <span class="o">:=</span> <span class="nx">Triangle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">red</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">Hex</span><span class="p">(</span><span class="mh">0xff0000</span><span class="p">)</span>
	<span class="nx">green</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">Hex</span><span class="p">(</span><span class="mh">0x00ff00</span><span class="p">)</span>
	<span class="nx">blue</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">HexString</span><span class="p">(</span><span class="s">&#34;#0000ff&#34;</span><span class="p">)</span>

	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="p">[</span><span class="p">]</span><span class="nx">color</span><span class="p">.</span><span class="nx">RGBA</span><span class="p">{</span>
		<span class="nx">red</span><span class="p">,</span> <span class="nx">green</span><span class="p">,</span> <span class="nx">blue</span><span class="p">,</span>
	<span class="p">}</span><span class="p">)</span>
	<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/020_color.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Stateful Context</h2>
  <p>Experimenting with adding a stateful "context" drawing API, since people are very familiar with this pattern and it can save some verbose lines of code.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">ctx</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewContext</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="nx">ctx</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">White</span><span class="p">)</span>

	<span class="nx">e</span> <span class="o">:=</span> <span class="nx">Ellipse</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">:</span>       <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">Size</span><span class="p">:</span>     <span class="nx">XY</span><span class="p">{</span><span class="mf">.3</span><span class="p">,</span> <span class="mf">.2</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">Segments</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">ctx</span><span class="p">.</span><span class="nx">FillColor</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nx">Blue</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nf">Fill</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>

	<span class="nx">ctx</span><span class="p">.</span><span class="nx">StrokeWidth</span> <span class="p">=</span> <span class="mf">0.005</span>
	<span class="nx">ctx</span><span class="p">.</span><span class="nf">Stroke</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/021_context.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Circle Pack</h2>
  <p>Currently, a failed experiement with finding an efficient circle packing algorithm. Maybe some day I'll crack it.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/voronoi&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">box</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
		<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.9</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">bn</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nx">BlueNoise</span><span class="p">{</span>
		<span class="nx">Limit</span><span class="p">:</span>   <span class="mi">5000</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span>    <span class="nx">box</span><span class="p">,</span>
		<span class="nx">Spacing</span><span class="p">:</span> <span class="mf">0.02</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="kd">var</span> <span class="nx">xys</span> <span class="p">[</span><span class="p">]</span><span class="nx">XY</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">xy</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bn</span><span class="p">.</span><span class="nf">Generate</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">continue</span>
		<span class="p">}</span>
		<span class="nx">xys</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">xys</span><span class="p">,</span> <span class="nx">xy</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">xy</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">xys</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Dot</span><span class="p">{</span><span class="nx">XY</span><span class="p">:</span> <span class="nx">xy</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">colors</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">v</span> <span class="o">:=</span> <span class="nx">voronoi</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">xys</span><span class="p">,</span> <span class="nx">box</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">c</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span>
		<span class="nx">c</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mf">0.3</span>

		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tri</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Tris</span> <span class="p">{</span>
			<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">tri</span><span class="p">)</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">e</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Edges</span> <span class="p">{</span>
			<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
				<span class="nx">Target</span><span class="p">:</span> <span class="nx">e</span><span class="p">,</span>
				<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.002</span><span class="p">,</span>
			<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/circle_pack.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Combos</h2>
  <p>Generate all 3x3 combos.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">gfx</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">White</span><span class="p">)</span>

	<span class="nx">center</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span>
	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span>
		<span class="nx">Rows</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
		<span class="nx">Cols</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nf">RectCenter</span><span class="p">(</span><span class="nx">center</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.97</span><span class="p">}</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">sub</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span><span class="nx">Rows</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

	<span class="kd">var</span> <span class="nx">bold</span> <span class="p">[</span><span class="p">]</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Strokeable</span>
	<span class="kd">var</span> <span class="nx">strokes</span> <span class="p">[</span><span class="p">]</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Strokeable</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.003</span><span class="p">)</span>
		<span class="nx">bold</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">bold</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

		<span class="k">for</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">sc</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">sub</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">sr</span> <span class="o">:=</span> <span class="nx">sc</span><span class="p">.</span><span class="nx">Rect</span>

			<span class="nx">xr</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
				<span class="nx">A</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">sr</span><span class="p">.</span><span class="nx">A</span><span class="p">)</span><span class="p">,</span>
				<span class="nx">B</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">sr</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span><span class="p">,</span>
			<span class="p">}</span>

			<span class="nx">strokes</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">strokes</span><span class="p">,</span> <span class="nx">xr</span><span class="p">)</span>

			<span class="c1">// TODO interleaving a stroke
</span><span class="c1"></span>			<span class="c1">//      causes all the batching to fail
</span><span class="c1"></span>			<span class="c1">// TODO move these things to an examples
</span><span class="c1"></span>			<span class="c1">//      folder demonstrating performance
</span><span class="c1"></span>			<span class="c1">//      issues
</span><span class="c1"></span>			<span class="c1">//doc.Shader(stk)
</span><span class="c1"></span>
			<span class="nx">mask</span> <span class="o">:=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="nx">j</span>
			<span class="k">if</span> <span class="nx">i</span><span class="o">&amp;</span><span class="nx">mask</span> <span class="o">==</span> <span class="nx">mask</span> <span class="p">{</span>
				<span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">xr</span><span class="p">)</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">stk</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">strokes</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">stk</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.0002</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">stk</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">bold</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">stk</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.0009</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/combos.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Coqart Grid</h2>
  <p>Replica of a piece by Roger Coqart.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">ctx</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewContext</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="nx">center</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span>
	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span>
		<span class="nx">Rows</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nf">SquareCenter</span><span class="p">(</span><span class="nx">center</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">lines</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">Line</span><span class="p">{</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
		<span class="p">{</span><span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span>
		<span class="nx">r</span> <span class="p">=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>

		<span class="nx">p</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">Row</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">grid</span><span class="p">.</span><span class="nx">Rows</span><span class="p">)</span>
		<span class="nx">n</span> <span class="o">:=</span> <span class="nb">int</span><span class="p">(</span><span class="nx">math</span><span class="p">.</span><span class="nf">Interp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span><span class="p">)</span>
		<span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">n</span> <span class="p">{</span>
			<span class="nx">l</span> <span class="o">:=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">lines</span><span class="p">)</span><span class="p">)</span><span class="p">]</span>
			<span class="nx">c</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">A</span><span class="p">)</span>
			<span class="nx">d</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span>

			<span class="nx">ctx</span><span class="p">.</span><span class="nf">Stroke</span><span class="p">(</span><span class="nx">Line</span><span class="p">{</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">}</span><span class="p">)</span>

			<span class="nx">i</span><span class="o">++</span>
		<span class="p">}</span>

		<span class="nx">ctx</span><span class="p">.</span><span class="nf">Stroke</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/coqart_grid.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Grayblocks</h2>
  <p>Just for fun.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/voronoi&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">N</span>       <span class="p">=</span> <span class="mi">10</span>
	<span class="nx">Padding</span> <span class="p">=</span> <span class="mf">0.01</span>
	<span class="nx">Margin</span>  <span class="p">=</span> <span class="nx">Padding</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">split</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mf">.3</span><span class="p">,</span> <span class="mf">.7</span><span class="p">)</span>
		<span class="nx">bot</span> <span class="o">:=</span> <span class="nx">i</span><span class="o">/</span><span class="nx">N</span> <span class="o">+</span> <span class="p">(</span><span class="nx">Padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
		<span class="nx">top</span> <span class="o">:=</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="nx">N</span> <span class="o">-</span> <span class="p">(</span><span class="nx">Padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

		<span class="nx">p</span> <span class="o">:=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">N</span>
		<span class="nx">c</span> <span class="o">:=</span> <span class="nx">RGBA</span><span class="p">{</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>

		<span class="c1">// left
</span><span class="c1"></span>		<span class="nx">ra</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">Margin</span><span class="p">,</span> <span class="nx">bot</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">split</span> <span class="o">-</span> <span class="p">(</span><span class="nx">Padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span><span class="p">,</span> <span class="nx">top</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span>
		<span class="c1">// right
</span><span class="c1"></span>		<span class="nx">rb</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
			<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">split</span> <span class="o">+</span> <span class="p">(</span><span class="nx">Padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span><span class="p">,</span> <span class="nx">bot</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">Margin</span><span class="p">,</span> <span class="nx">top</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="nx">ca</span> <span class="o">:=</span> <span class="nx">VoronoiCells</span><span class="p">{</span>
			<span class="nx">Rect</span><span class="p">:</span>    <span class="nx">ra</span><span class="p">,</span>
			<span class="nx">Spacing</span><span class="p">:</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Interp</span><span class="p">(</span><span class="mf">0.003</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="nx">i</span><span class="o">/</span><span class="nx">N</span><span class="p">)</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
			<span class="nx">Mesh</span><span class="p">:</span>  <span class="nx">ca</span><span class="p">.</span><span class="nf">Mesh</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span> <span class="nx">c</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
			<span class="nx">Color</span><span class="p">:</span> <span class="nx">c</span><span class="p">,</span>
			<span class="nx">Mesh</span><span class="p">:</span>  <span class="nx">rb</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">VoronoiCells</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Rect</span>
	<span class="nx">Spacing</span> <span class="kt">float32</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">vc</span> <span class="nx">VoronoiCells</span><span class="p">)</span> <span class="nf">Mesh</span><span class="p">(</span><span class="p">)</span> <span class="nx">Mesh</span> <span class="p">{</span>
	<span class="nx">bn</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nx">BlueNoise</span><span class="p">{</span>
		<span class="nx">Rect</span><span class="p">:</span>    <span class="nx">vc</span><span class="p">.</span><span class="nx">Rect</span><span class="p">,</span>
		<span class="nx">Spacing</span><span class="p">:</span> <span class="nx">vc</span><span class="p">.</span><span class="nx">Spacing</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">noise</span> <span class="o">:=</span> <span class="nx">bn</span><span class="p">.</span><span class="nf">Generate</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">v</span> <span class="o">:=</span> <span class="nx">voronoi</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">noise</span><span class="p">,</span> <span class="nx">vc</span><span class="p">.</span><span class="nx">Rect</span><span class="p">)</span>

	<span class="kd">var</span> <span class="nx">meshes</span> <span class="p">[</span><span class="p">]</span><span class="nx">Mesh</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">e</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Edges</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">meshes</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">meshes</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nf">Stroke</span><span class="p">(</span><span class="nx">StrokeOpt</span><span class="p">{</span><span class="p">}</span><span class="p">)</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nf">Merge</span><span class="p">(</span><span class="nx">meshes</span><span class="o">...</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/grayblock.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Hex Grid</h2>
  <p>Generating hexagons in a grid.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Size</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="nx">Z</span>    <span class="p">=</span> <span class="mf">0.015</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">palette</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">HexGrid</span><span class="p">{</span><span class="nx">Size</span><span class="p">}</span>
	<span class="nx">cells</span> <span class="o">:=</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cells</span> <span class="p">{</span>
		<span class="nx">col</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">palette</span><span class="p">)</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">col</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">cells</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">cell</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">Black</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.004</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/hexgrid.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Hobbs Split</h2>
  <p>Inspired by an essay from Tyler Hobbs.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">a</span> <span class="o">:=</span> <span class="nx">Triangle</span><span class="p">{</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">C</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">b</span> <span class="o">:=</span> <span class="nx">Triangle</span><span class="p">{</span>
		<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">C</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">tris</span> <span class="o">:=</span> <span class="nf">recursive</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
	<span class="nx">p</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">layer</span> <span class="o">:=</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">NewLayer</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">t</span><span class="p">,</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">layer</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">t</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.0005</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">layer</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">cir</span> <span class="o">:=</span> <span class="nx">Circle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">:</span>       <span class="nx">XY</span><span class="p">{</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">Radius</span><span class="p">:</span>   <span class="mf">0.4</span><span class="p">,</span>
		<span class="nx">Segments</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Cut</span><span class="p">{</span>
		<span class="nx">Shape</span><span class="p">:</span>  <span class="nx">cir</span><span class="p">,</span>
		<span class="nx">Source</span><span class="p">:</span> <span class="nx">layer</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
		<span class="nx">Target</span><span class="p">:</span> <span class="nx">cir</span><span class="p">,</span>
		<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.005</span><span class="p">,</span>
		<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Black</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">recursive</span><span class="p">(</span><span class="nx">depth</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">tris</span> <span class="o">...</span><span class="nx">Triangle</span><span class="p">)</span> <span class="p">[</span><span class="p">]</span><span class="nx">Triangle</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">depth</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span>
	<span class="p">}</span>
	<span class="kd">var</span> <span class="nx">out</span> <span class="p">[</span><span class="p">]</span><span class="nx">Triangle</span>
	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
		<span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">:=</span> <span class="nf">split</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
		<span class="nx">out</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
		<span class="nx">out</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nf">recursive</span><span class="p">(</span><span class="nx">depth</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span><span class="o">...</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">split</span><span class="p">(</span><span class="nx">t</span> <span class="nx">Triangle</span><span class="p">)</span> <span class="p">(</span><span class="nx">Triangle</span><span class="p">,</span> <span class="nx">Triangle</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">edges</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nf">Edges</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">lens</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="kt">float32</span><span class="p">{</span>
		<span class="nx">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nf">SquaredLength</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="nf">SquaredLength</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">edges</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">.</span><span class="nf">SquaredLength</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">do</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">long</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">Line</span><span class="p">)</span> <span class="p">(</span><span class="nx">Triangle</span><span class="p">,</span> <span class="nx">Triangle</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mid</span> <span class="o">:=</span> <span class="nx">long</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)</span><span class="p">)</span>
		<span class="k">return</span> <span class="nx">Triangle</span><span class="p">{</span>
				<span class="nx">mid</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span>
			<span class="p">}</span><span class="p">,</span> <span class="nx">Triangle</span><span class="p">{</span>
				<span class="nx">mid</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span>
			<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">{</span>
	<span class="k">case</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">:</span>
		<span class="k">return</span> <span class="nf">do</span><span class="p">(</span><span class="nx">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">)</span>
	<span class="k">case</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="nx">lens</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">:</span>
		<span class="k">return</span> <span class="nf">do</span><span class="p">(</span><span class="nx">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">)</span>
	<span class="k">default</span><span class="p">:</span>
		<span class="k">return</span> <span class="nf">do</span><span class="p">(</span><span class="nx">edges</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">,</span> <span class="nx">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/hobbs_split.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Molnar2</h2>
  <p>Inspired by Vera Molnar.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">White</span><span class="p">)</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span>
		<span class="nx">Rows</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
		<span class="nx">Cols</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nf">SquareCenter</span><span class="p">(</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Center</span><span class="p">,</span> <span class="mf">.8</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="nx">Z</span> <span class="p">=</span> <span class="mf">0.007</span>
		<span class="kd">const</span> <span class="nx">G</span> <span class="p">=</span> <span class="mf">0.005</span>

		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span>
			<span class="nx">Y</span><span class="p">:</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="nx">Z</span><span class="p">,</span> <span class="nx">Z</span><span class="p">)</span><span class="p">,</span>
		<span class="p">}</span><span class="p">)</span>
		<span class="nx">grow</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">G</span><span class="p">)</span>
		<span class="nx">r</span><span class="p">.</span><span class="nx">A</span><span class="p">.</span><span class="nx">X</span> <span class="o">-=</span> <span class="nx">grow</span>
		<span class="nx">r</span><span class="p">.</span><span class="nx">B</span><span class="p">.</span><span class="nx">X</span> <span class="o">+=</span> <span class="nx">grow</span>

		<span class="nx">col</span> <span class="o">:=</span> <span class="nx">Red</span>
		<span class="nx">col</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mf">0.7</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">r</span><span class="p">,</span> <span class="nx">col</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/molnar2.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Mosaic Sun</h2>
  <p>Trying to figure out mosaic styling.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Gap</span>   <span class="p">=</span> <span class="mf">0.001</span>
	<span class="nx">Space</span> <span class="p">=</span> <span class="mf">0.0045</span>
	<span class="nx">Count</span> <span class="p">=</span> <span class="mi">25</span>

	<span class="nx">Start</span> <span class="p">=</span> <span class="mf">0.01</span>
	<span class="nx">Width</span> <span class="p">=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="nx">Start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">Count</span>

	<span class="nx">MinChord</span> <span class="p">=</span> <span class="mf">0.005</span>
	<span class="nx">MaxChord</span> <span class="p">=</span> <span class="mf">0.008</span>

	<span class="nx">JumpChance</span>    <span class="p">=</span> <span class="mf">0.2</span>
	<span class="nx">LightenChance</span> <span class="p">=</span> <span class="mf">0.4</span>
	<span class="nx">LightenAmt</span>    <span class="p">=</span> <span class="mf">0.2</span>
	<span class="nx">TweakChance</span>   <span class="p">=</span> <span class="mf">0.3</span>
	<span class="nx">TweakAmt</span>      <span class="p">=</span> <span class="o">-</span><span class="mf">0.001</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">A</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">HexString</span><span class="p">(</span><span class="s">&#34;#ebc334&#34;</span><span class="p">)</span>
	<span class="nx">B</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">HexString</span><span class="p">(</span><span class="s">&#34;#0c79e8&#34;</span><span class="p">)</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
		<span class="nx">Mesh</span><span class="p">:</span> <span class="nx">Circle</span><span class="p">{</span>
			<span class="nx">XY</span><span class="p">:</span>       <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">}</span><span class="p">,</span>
			<span class="nx">Radius</span><span class="p">:</span>   <span class="nx">Start</span> <span class="o">-</span> <span class="nx">Gap</span><span class="p">,</span>
			<span class="nx">Segments</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
		<span class="p">}</span><span class="p">,</span>
		<span class="nx">Color</span><span class="p">:</span> <span class="nx">A</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">Count</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>

		<span class="nx">rings</span> <span class="o">:=</span> <span class="nx">Rings</span><span class="p">{</span>
			<span class="nx">Offset</span><span class="p">:</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="p">,</span>
			<span class="nx">Inner</span><span class="p">:</span>  <span class="nx">Start</span> <span class="o">+</span> <span class="nx">i</span><span class="o">*</span><span class="nx">Width</span><span class="p">,</span>
			<span class="nx">Outer</span><span class="p">:</span>  <span class="nx">Start</span> <span class="o">+</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nx">Width</span> <span class="o">-</span> <span class="nx">Space</span><span class="p">,</span>
			<span class="nx">Gap</span><span class="p">:</span>    <span class="nx">Gap</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">min</span> <span class="kt">float32</span> <span class="p">=</span> <span class="nx">MinChord</span>
		<span class="kd">var</span> <span class="nx">max</span> <span class="kt">float32</span> <span class="p">=</span> <span class="nx">MaxChord</span>

		<span class="nx">min</span> <span class="o">+=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">0.001</span>
		<span class="nx">max</span> <span class="o">+=</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">0.003</span>
		<span class="nx">max</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Min</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>

		<span class="nx">chords</span> <span class="o">:=</span> <span class="nf">GenChords</span><span class="p">(</span><span class="nx">rings</span><span class="p">.</span><span class="nx">Inner</span><span class="p">,</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span>
		<span class="c1">// TODO interpcolor isn&#39;t based on visual interpolation
</span><span class="c1"></span>		<span class="c1">//      going form orange to blue goes through green
</span><span class="c1"></span>		<span class="nx">col</span> <span class="o">:=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">,</span> <span class="nx">i</span><span class="o">/</span><span class="nx">Count</span><span class="p">)</span>

		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">in</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">chords</span> <span class="p">{</span>
			<span class="nx">rx</span> <span class="o">:=</span> <span class="nx">rings</span>
			<span class="nx">rx</span><span class="p">.</span><span class="nx">From</span> <span class="p">=</span> <span class="nx">in</span><span class="p">.</span><span class="nx">From</span>
			<span class="nx">rx</span><span class="p">.</span><span class="nx">To</span> <span class="p">=</span> <span class="nx">in</span><span class="p">.</span><span class="nx">To</span>
			<span class="nx">rx</span><span class="p">.</span><span class="nx">Gap</span> <span class="o">+=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">)</span>
			<span class="nx">rx</span><span class="p">.</span><span class="nx">Color</span> <span class="p">=</span> <span class="nx">col</span>

			<span class="k">if</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="nx">JumpChance</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">rx</span><span class="p">.</span><span class="nx">Color</span> <span class="p">=</span> <span class="nx">color</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">,</span>
					<span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">Count</span><span class="p">)</span><span class="o">/</span><span class="nx">Count</span><span class="p">,</span>
				<span class="p">)</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="nx">LightenChance</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">amt</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="nx">LightenAmt</span><span class="p">,</span> <span class="nx">LightenAmt</span><span class="p">)</span>
				<span class="nx">rx</span><span class="p">.</span><span class="nx">Color</span> <span class="p">=</span> <span class="nx">rx</span><span class="p">.</span><span class="nx">Color</span><span class="p">.</span><span class="nf">Lighten</span><span class="p">(</span><span class="nx">amt</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="nx">rx</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Rings</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Inner</span><span class="p">,</span> <span class="nx">Outer</span> <span class="kt">float32</span>
	<span class="nx">From</span><span class="p">,</span> <span class="nx">To</span>     <span class="kt">float32</span>
	<span class="nx">Offset</span>       <span class="kt">float32</span>
	<span class="nx">Gap</span>          <span class="kt">float32</span>
	<span class="nx">Color</span>        <span class="nx">color</span><span class="p">.</span><span class="nx">RGBA</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="nx">Rings</span><span class="p">)</span> <span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Layer</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">center</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">}</span>
	<span class="nx">inner</span> <span class="o">:=</span> <span class="nx">Circle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">:</span>     <span class="nx">center</span><span class="p">,</span>
		<span class="nx">Radius</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Inner</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">outer</span> <span class="o">:=</span> <span class="nx">Circle</span><span class="p">{</span>
		<span class="nx">XY</span><span class="p">:</span>     <span class="nx">center</span><span class="p">,</span>
		<span class="nx">Radius</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Outer</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">from</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Offset</span> <span class="o">+</span> <span class="nx">r</span><span class="p">.</span><span class="nx">From</span>
	<span class="nx">to</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Offset</span> <span class="o">+</span> <span class="nx">r</span><span class="p">.</span><span class="nx">To</span>
	<span class="nx">innerGap</span> <span class="o">:=</span> <span class="nf">ChordAngle</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Inner</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Gap</span><span class="p">)</span>
	<span class="nx">outerGap</span> <span class="o">:=</span> <span class="nf">ChordAngle</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Outer</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Gap</span><span class="p">)</span>
	<span class="nx">quad</span> <span class="o">:=</span> <span class="nx">Quad</span><span class="p">{</span>
		<span class="nx">inner</span><span class="p">.</span><span class="nf">XYFromAngle</span><span class="p">(</span><span class="nx">from</span> <span class="o">+</span> <span class="nx">innerGap</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">inner</span><span class="p">.</span><span class="nf">XYFromAngle</span><span class="p">(</span><span class="nx">to</span> <span class="o">-</span> <span class="nx">innerGap</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">outer</span><span class="p">.</span><span class="nf">XYFromAngle</span><span class="p">(</span><span class="nx">to</span> <span class="o">-</span> <span class="nx">outerGap</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">outer</span><span class="p">.</span><span class="nf">XYFromAngle</span><span class="p">(</span><span class="nx">from</span> <span class="o">+</span> <span class="nx">outerGap</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Bool</span><span class="p">(</span><span class="nx">TweakChance</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">quad</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">TweakQuad</span><span class="p">(</span><span class="nx">quad</span><span class="p">,</span> <span class="nx">TweakAmt</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">fill</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">quad</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">Color</span><span class="p">}</span>
	<span class="nx">fill</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Chord</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">From</span><span class="p">,</span> <span class="nx">To</span> <span class="kt">float32</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">GenChords</span><span class="p">(</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span> <span class="kt">float32</span><span class="p">)</span> <span class="p">[</span><span class="p">]</span><span class="nx">Chord</span> <span class="p">{</span>

	<span class="kd">var</span> <span class="nx">out</span> <span class="p">[</span><span class="p">]</span><span class="nx">Chord</span>

	<span class="nx">p</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="k">for</span> <span class="p">{</span>
		<span class="nx">length</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span>
		<span class="c1">// Protect against NaN
</span><span class="c1"></span>		<span class="c1">// from Asin in ChordAngle
</span><span class="c1"></span>		<span class="k">if</span> <span class="nx">length</span> <span class="o">&gt;=</span> <span class="nx">radius</span> <span class="p">{</span>
			<span class="nx">length</span> <span class="p">=</span> <span class="nx">radius</span>
		<span class="p">}</span>
		<span class="nx">ang</span> <span class="o">:=</span> <span class="nf">ChordAngle</span><span class="p">(</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">length</span><span class="p">)</span>
		<span class="nx">next</span> <span class="o">:=</span> <span class="nx">p</span> <span class="o">+</span> <span class="nx">ang</span>

		<span class="k">if</span> <span class="nx">next</span> <span class="o">&gt;=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span><span class="o">*</span><span class="mi">2</span> <span class="p">{</span>
			<span class="nx">out</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nx">Chord</span><span class="p">{</span>
				<span class="nx">From</span><span class="p">:</span> <span class="nx">p</span><span class="p">,</span>
			<span class="p">}</span><span class="p">)</span>
			<span class="k">break</span>
		<span class="p">}</span>

		<span class="nx">out</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">out</span><span class="p">,</span> <span class="nx">Chord</span><span class="p">{</span>
			<span class="nx">From</span><span class="p">:</span> <span class="nx">p</span><span class="p">,</span>
			<span class="nx">To</span><span class="p">:</span>   <span class="nx">next</span><span class="p">,</span>
		<span class="p">}</span><span class="p">)</span>
		<span class="nx">p</span> <span class="p">=</span> <span class="nx">next</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">ChordAngle</span><span class="p">(</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">length</span> <span class="kt">float32</span><span class="p">)</span> <span class="kt">float32</span> <span class="p">{</span>
	<span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Asin</span><span class="p">(</span><span class="nx">length</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">radius</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/mosaic_sun.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Nees</h2>
  <p>Inspired by George Nees.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Width</span>  <span class="p">=</span> <span class="mi">16</span>
	<span class="nx">Height</span> <span class="p">=</span> <span class="mi">30</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">center</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">}</span>
	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span>
		<span class="nx">Rows</span><span class="p">:</span> <span class="nx">Height</span><span class="p">,</span>
		<span class="nx">Cols</span><span class="p">:</span> <span class="nx">Width</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nf">RectCenter</span><span class="p">(</span><span class="nx">center</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.9</span><span class="p">}</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span>
		<span class="nx">r</span> <span class="p">=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>

		<span class="nx">row</span> <span class="o">:=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">Width</span>
		<span class="nx">row</span> <span class="p">=</span> <span class="nx">Height</span> <span class="o">-</span> <span class="nx">row</span> <span class="o">-</span> <span class="mi">5</span>
		<span class="nx">dr</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="o">/</span> <span class="nx">Height</span>
		<span class="nx">dr</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="nx">dr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

		<span class="nx">t</span> <span class="o">:=</span> <span class="nx">dr</span> <span class="o">*</span> <span class="mf">0.01</span>
		<span class="nx">r</span> <span class="p">=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Translate</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">XYRange</span><span class="p">(</span><span class="o">-</span><span class="nx">t</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span><span class="p">)</span>

		<span class="nx">q</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Quad</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">ang</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="nx">dr</span><span class="p">,</span> <span class="nx">dr</span><span class="p">)</span>
		<span class="nx">q</span> <span class="p">=</span> <span class="nx">q</span><span class="p">.</span><span class="nf">RotateAround</span><span class="p">(</span><span class="nx">ang</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Center</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>

		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">q</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.001</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/nees.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Noise 1D</h2>
  <p>1D noise line.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">N</span>       <span class="p">=</span> <span class="mi">1000</span>
	<span class="nx">Scale</span>   <span class="p">=</span> <span class="mf">1.5</span>
	<span class="nx">Octaves</span> <span class="p">=</span> <span class="mi">40</span>
	<span class="nx">Shift</span>   <span class="p">=</span> <span class="mf">0.55</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">x</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">/</span> <span class="nx">N</span>

		<span class="nx">h</span> <span class="o">:=</span> <span class="nf">octaves</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
		<span class="nx">h</span> <span class="o">-=</span> <span class="mf">0.7</span>
		<span class="nx">h</span> <span class="o">*=</span> <span class="mf">.2</span>

		<span class="nx">xy</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">x</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="nx">h</span><span class="p">}</span>
		<span class="nx">c</span> <span class="o">:=</span> <span class="nx">Circle</span><span class="p">{</span><span class="nx">xy</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mi">10</span><span class="p">}</span>
		<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span>
		<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">octaves</span><span class="p">(</span><span class="nx">x</span> <span class="kt">float32</span><span class="p">,</span> <span class="nx">N</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">float32</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">n</span> <span class="kt">float32</span>
	<span class="kd">var</span> <span class="nx">z</span> <span class="kt">float32</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="kd">var</span> <span class="nx">amp</span> <span class="kt">float32</span> <span class="p">=</span> <span class="mi">1</span>

	<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">n</span> <span class="o">+=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Noise1</span><span class="p">(</span><span class="nx">x</span><span class="o">*</span><span class="nx">z</span><span class="p">)</span> <span class="o">*</span> <span class="nx">amp</span>
		<span class="nx">amp</span> <span class="o">*=</span> <span class="mf">0.5</span>
		<span class="nx">z</span> <span class="p">=</span> <span class="nx">z</span> <span class="o">*</span> <span class="mi">2</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">n</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/noise_1d.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Rotline</h2>
  <p></p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">gfx</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">White</span><span class="p">)</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span>
		<span class="nx">Rows</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
		<span class="nx">Cols</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span> <span class="nf">RectCenter</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="mf">.5</span><span class="p">,</span> <span class="mf">.5</span><span class="p">}</span><span class="p">,</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.95</span><span class="p">,</span> <span class="mf">.95</span><span class="p">}</span><span class="p">)</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="nx">col</span> <span class="o">:=</span> <span class="nx">Blue</span>
	<span class="nx">col</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mf">0.7</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
		<span class="nx">size</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Size</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">center</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Center</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">a</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span>
			<span class="nx">X</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">A</span><span class="p">.</span><span class="nx">X</span> <span class="o">+</span> <span class="nx">size</span><span class="p">.</span><span class="nx">X</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
			<span class="nx">Y</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">A</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
		<span class="p">}</span>
		<span class="nx">b</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span>
			<span class="nx">X</span><span class="p">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">X</span><span class="p">,</span>
			<span class="nx">Y</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nx">B</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
		<span class="p">}</span>
		<span class="nx">rot</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Angle</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">l</span> <span class="o">:=</span> <span class="nx">Line</span><span class="p">{</span><span class="nx">a</span><span class="p">.</span><span class="nf">Rotate</span><span class="p">(</span><span class="nx">rot</span><span class="p">,</span> <span class="nx">center</span><span class="p">)</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nf">Rotate</span><span class="p">(</span><span class="nx">rot</span><span class="p">,</span> <span class="nx">center</span><span class="p">)</span><span class="p">}</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">l</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">col</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.0025</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/rotline.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Sand Spline</h2>
  <p>Inspired by Anders Hoff and Jared Tarbell. Not working the way I want yet. Splines need love.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Lines</span>  <span class="p">=</span> <span class="mi">17</span>
	<span class="nx">N</span>      <span class="p">=</span> <span class="mi">30</span>
	<span class="nx">Passes</span> <span class="p">=</span> <span class="mi">20</span>
	<span class="nx">MinY</span>   <span class="p">=</span> <span class="mf">0.005</span>
	<span class="nx">MaxY</span>   <span class="p">=</span> <span class="mf">0.04</span>

	<span class="nx">MinX</span> <span class="p">=</span> <span class="o">-</span><span class="mf">0.02</span>
	<span class="nx">MaxX</span> <span class="p">=</span> <span class="mf">0.02</span>

	<span class="nx">LineWidth</span> <span class="p">=</span> <span class="mf">0.003</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">redDot</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Dot</span><span class="p">{</span><span class="nx">Color</span><span class="p">:</span> <span class="nx">Red</span><span class="p">,</span> <span class="nx">Radius</span><span class="p">:</span> <span class="mf">0.003</span><span class="p">}</span>

	<span class="k">for</span> <span class="nx">k</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nx">Lines</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">y</span> <span class="o">:=</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="o">*</span><span class="mf">0.05</span>

		<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nx">Passes</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">curves</span> <span class="nx">Path</span>

			<span class="nx">pt</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.05</span><span class="p">,</span> <span class="nx">y</span><span class="p">}</span>
			<span class="nx">inc</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">0.90</span> <span class="o">/</span> <span class="nx">N</span><span class="p">,</span> <span class="mi">0</span><span class="p">}</span>
			<span class="kd">var</span> <span class="nx">ctrl</span> <span class="nx">XY</span>
			<span class="kd">var</span> <span class="nx">offset</span> <span class="kt">float32</span>

			<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>

				<span class="k">if</span> <span class="nx">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
					<span class="nx">offset</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="nx">MinX</span><span class="p">,</span> <span class="nx">MaxX</span><span class="p">)</span>

					<span class="nx">ctrl</span> <span class="p">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span>
						<span class="nx">X</span><span class="p">:</span> <span class="nx">inc</span><span class="p">.</span><span class="nx">X</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">,</span>
						<span class="nx">Y</span><span class="p">:</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="nx">MinY</span><span class="p">,</span> <span class="nx">MaxY</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float32</span><span class="p">(</span><span class="nx">Lines</span><span class="o">-</span><span class="nx">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">Lines</span><span class="p">)</span><span class="p">,</span>
					<span class="p">}</span><span class="p">)</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">ctrl</span> <span class="p">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span>
						<span class="nx">X</span><span class="p">:</span> <span class="nx">inc</span><span class="p">.</span><span class="nx">X</span><span class="o">*</span><span class="mf">0.5</span> <span class="o">-</span> <span class="nx">offset</span><span class="p">,</span>
						<span class="nx">Y</span><span class="p">:</span> <span class="nx">pt</span><span class="p">.</span><span class="nx">Y</span> <span class="o">-</span> <span class="nx">ctrl</span><span class="p">.</span><span class="nx">Y</span><span class="p">,</span>
					<span class="p">}</span><span class="p">)</span>
				<span class="p">}</span>

				<span class="nx">curves</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">curves</span><span class="p">,</span> <span class="nx">Quadratic</span><span class="p">{</span>
					<span class="nx">A</span><span class="p">:</span>    <span class="nx">pt</span><span class="p">,</span>
					<span class="nx">B</span><span class="p">:</span>    <span class="nx">pt</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">inc</span><span class="p">)</span><span class="p">,</span>
					<span class="nx">Ctrl</span><span class="p">:</span> <span class="nx">ctrl</span><span class="p">,</span>
				<span class="p">}</span><span class="p">)</span>

				<span class="nx">rd</span> <span class="o">:=</span> <span class="nx">redDot</span>
				<span class="nx">rd</span><span class="p">.</span><span class="nx">XY</span> <span class="p">=</span> <span class="nx">ctrl</span>
				<span class="c1">//rd.Draw(doc)
</span><span class="c1"></span>				<span class="cm">/*
</span><span class="cm">					TODO want. go proposal
</span><span class="cm">					redDot{
</span><span class="cm">						XY: ctrl,
</span><span class="cm">					}.Draw(doc)
</span><span class="cm">				*/</span>

				<span class="nx">pt</span> <span class="p">=</span> <span class="nx">pt</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">inc</span><span class="p">)</span>
			<span class="p">}</span>

			<span class="nx">c</span> <span class="o">:=</span> <span class="nx">Teal</span>
			<span class="nx">c</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mf">0.3</span>

			<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
				<span class="nx">Target</span><span class="p">:</span> <span class="nx">curves</span><span class="p">,</span>
				<span class="nx">Width</span><span class="p">:</span>  <span class="nx">LineWidth</span><span class="p">,</span>
				<span class="nx">Color</span><span class="p">:</span>  <span class="nx">c</span><span class="p">,</span>
			<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/sand_spline.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Sand Stroke</h2>
  <p>Inspired by Jared Tarbell.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;log&#34;</span>
	<span class="s">&#34;time&#34;</span>

	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Lines</span>   <span class="p">=</span> <span class="mi">20</span>
	<span class="nx">Strokes</span> <span class="p">=</span> <span class="mi">20</span>
	<span class="nx">N</span>       <span class="p">=</span> <span class="mi">1000</span>
	<span class="c1">// percentage of W
</span><span class="c1"></span>	<span class="c1">// only works for small N
</span><span class="c1"></span>	<span class="nx">Padding</span> <span class="p">=</span> <span class="mf">0.00</span>
	<span class="nx">W</span>       <span class="p">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">N</span><span class="p">)</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">Padding</span><span class="p">)</span>

	<span class="c1">// min/max y-axis starting position
</span><span class="c1"></span>	<span class="nx">MinY</span> <span class="p">=</span> <span class="mf">0.1</span>
	<span class="nx">MaxY</span> <span class="p">=</span> <span class="mf">0.9</span>

	<span class="nx">D</span>    <span class="p">=</span> <span class="mf">0.004</span>
	<span class="nx">B</span>    <span class="p">=</span> <span class="mf">0.3</span>
	<span class="nx">MaxD</span> <span class="p">=</span> <span class="mf">0.2</span>
	<span class="nx">M</span>    <span class="p">=</span> <span class="mf">0.4</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">palette</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">start</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">ys</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kt">float32</span><span class="p">,</span> <span class="nx">Lines</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">ys</span> <span class="p">{</span>
		<span class="nx">ys</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="nx">MinY</span><span class="p">,</span> <span class="nx">MaxY</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nx">Strokes</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>

		<span class="nx">y</span> <span class="o">:=</span> <span class="nx">ys</span><span class="p">[</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">ys</span><span class="p">)</span><span class="p">)</span><span class="p">]</span>
		<span class="nx">dy</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
		<span class="nx">color</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">palette</span><span class="p">)</span>

		<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">N</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="nx">x</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">/</span> <span class="nx">N</span>

			<span class="nx">dy</span> <span class="o">+=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="nx">D</span><span class="p">,</span> <span class="nx">D</span><span class="p">)</span>
			<span class="nx">dy</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="nx">dy</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">MaxD</span><span class="p">)</span>

			<span class="nx">xy</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">}</span>
			<span class="nx">wh</span> <span class="o">:=</span> <span class="nx">XY</span><span class="p">{</span><span class="nx">W</span><span class="p">,</span> <span class="nx">dy</span><span class="p">}</span>
			<span class="nx">r</span> <span class="o">:=</span> <span class="nf">RectCenter</span><span class="p">(</span><span class="nx">xy</span><span class="p">,</span> <span class="nx">wh</span><span class="p">)</span>

			<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>
			<span class="nx">sc</span> <span class="o">:=</span> <span class="nx">color</span>
			<span class="nx">sc</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">dy</span><span class="o">/</span><span class="nx">B</span> <span class="o">-</span> <span class="nx">M</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="nx">sc</span><span class="p">)</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;run time: %s&#34;</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Since</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/sand_stroke.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Fast Sand Stroke</h2>
  <p>Fast version of Sand Stroke, because it relies more on OpenGL/GPU.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;image&#34;</span>
	<span class="nx">colorlib</span> <span class="s">&#34;image/color&#34;</span>

	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/math&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">Lines</span>   <span class="p">=</span> <span class="mi">3</span>
	<span class="nx">Strokes</span> <span class="p">=</span> <span class="mi">10</span>
	<span class="nx">N</span>       <span class="p">=</span> <span class="mi">300</span>
	<span class="nx">W</span>       <span class="p">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">N</span><span class="p">)</span>

	<span class="nx">Amp</span> <span class="p">=</span> <span class="mi">1000</span>

	<span class="c1">// min/max y-axis starting position
</span><span class="c1"></span>	<span class="nx">MinY</span> <span class="p">=</span> <span class="mf">0.1</span>
	<span class="nx">MaxY</span> <span class="p">=</span> <span class="mf">0.9</span>

	<span class="nx">D</span>           <span class="p">=</span> <span class="mf">0.0040</span>
	<span class="nx">MaxD</span>        <span class="p">=</span> <span class="mf">0.2</span>
	<span class="nx">AlphaOffset</span> <span class="p">=</span> <span class="o">-</span><span class="mf">0.3</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">palette</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">lines</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kt">float32</span><span class="p">,</span> <span class="nx">Lines</span><span class="p">)</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">lines</span> <span class="p">{</span>
		<span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="nx">MinY</span><span class="p">,</span> <span class="nx">MaxY</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nx">Strokes</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">{</span>

		<span class="nx">y</span> <span class="o">:=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">lines</span><span class="p">)</span><span class="p">)</span><span class="p">]</span>

		<span class="nx">heights</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="p">[</span><span class="p">]</span><span class="kt">float32</span><span class="p">,</span> <span class="nx">N</span><span class="p">)</span>
		<span class="nx">h</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
		<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">heights</span> <span class="p">{</span>
			<span class="nx">h</span> <span class="o">+=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="nx">D</span><span class="p">,</span> <span class="nx">D</span><span class="p">)</span>
			<span class="nx">h</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">MaxD</span><span class="p">)</span>
			<span class="nx">heights</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">h</span>
		<span class="p">}</span>

		<span class="nx">img</span> <span class="o">:=</span> <span class="nf">makeHeightMap</span><span class="p">(</span><span class="nx">heights</span><span class="p">)</span>
		<span class="nx">heightmap</span> <span class="o">:=</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">NewImage</span><span class="p">(</span><span class="nx">img</span><span class="p">)</span>

		<span class="nx">s</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Shader</span><span class="p">{</span>
			<span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;Stroke&#34;</span><span class="p">,</span>
			<span class="nx">Vert</span><span class="p">:</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">DefaultVert</span><span class="p">,</span>
			<span class="nx">Frag</span><span class="p">:</span> <span class="nx">Frag</span><span class="p">,</span>
			<span class="nx">Mesh</span><span class="p">:</span> <span class="nx">Rect</span><span class="p">{</span>
				<span class="nx">XY</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">MaxD</span><span class="p">}</span><span class="p">,</span>
				<span class="nx">XY</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">MaxD</span><span class="p">}</span><span class="p">,</span>
			<span class="p">}</span><span class="p">,</span>
			<span class="nx">Attrs</span><span class="p">:</span> <span class="nx">gfx</span><span class="p">.</span><span class="nx">Attrs</span><span class="p">{</span>
				<span class="s">&#34;u_heightmap&#34;</span><span class="p">:</span>    <span class="nx">heightmap</span><span class="p">,</span>
				<span class="s">&#34;u_color&#34;</span><span class="p">:</span>        <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">palette</span><span class="p">)</span><span class="p">,</span>
				<span class="s">&#34;u_alpha_offset&#34;</span><span class="p">:</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">AlphaOffset</span><span class="p">)</span><span class="p">,</span>
			<span class="p">}</span><span class="p">,</span>
		<span class="p">}</span>
		<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">Frag</span> <span class="p">=</span> <span class="s">`</span><span class="s">
</span><span class="s">#version 330 core
</span><span class="s">
</span><span class="s">uniform vec4 u_color;
</span><span class="s">uniform sampler2D u_heightmap;
</span><span class="s">uniform float u_alpha_offset;
</span><span class="s">
</span><span class="s">in vec2 v_uv;
</span><span class="s">out vec4 color;
</span><span class="s">
</span><span class="s">void main() </span><span class="s">{</span><span class="s">
</span><span class="s">	float h = texture(u_heightmap, v_uv).r;
</span><span class="s">	float d = abs(v_uv.y - 0.5);
</span><span class="s">	float a = step(d, h) * (1-h*2) + u_alpha_offset;
</span><span class="s">	color = vec4(u_color.rgb, a);
</span><span class="s">}
</span><span class="s"></span><span class="s">`</span>

<span class="c1">// TODO want to easily create a texture without
</span><span class="c1"></span><span class="c1">//      involving the &#34;image&#34; library
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">makeHeightMap</span><span class="p">(</span><span class="nx">heights</span> <span class="p">[</span><span class="p">]</span><span class="kt">float32</span><span class="p">)</span> <span class="o">*</span><span class="nx">image</span><span class="p">.</span><span class="nx">Gray</span> <span class="p">{</span>
	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">image</span><span class="p">.</span><span class="nf">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">heights</span><span class="p">)</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
	<span class="nx">img</span> <span class="o">:=</span> <span class="nx">image</span><span class="p">.</span><span class="nf">NewGray</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">h</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">heights</span> <span class="p">{</span>
		<span class="nx">img</span><span class="p">.</span><span class="nf">SetGray</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">colorlib</span><span class="p">.</span><span class="nx">Gray</span><span class="p">{</span>
			<span class="nx">Y</span><span class="p">:</span> <span class="nb">uint8</span><span class="p">(</span><span class="nx">h</span> <span class="o">*</span> <span class="nx">Amp</span><span class="p">)</span><span class="p">,</span>
		<span class="p">}</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">img</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/sand_stroke_fast.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Squiggle Grid</h2>
  <p>Inspired by George Nees.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span><span class="nx">Rows</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span>
		<span class="nx">bnd</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="mf">0.013</span><span class="p">)</span>

		<span class="nx">current</span> <span class="o">:=</span> <span class="nx">bnd</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">rand</span><span class="p">.</span><span class="nf">XYRange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">)</span><span class="p">)</span>
		<span class="nx">pen</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Pen</span><span class="p">{</span><span class="p">}</span>
		<span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span>
		<span class="nx">horizontal</span> <span class="o">:=</span> <span class="kc">false</span>

		<span class="nx">pen</span><span class="p">.</span><span class="nf">MoveTo</span><span class="p">(</span><span class="nx">current</span><span class="p">)</span>

		<span class="k">for</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">20</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">add</span> <span class="nx">XY</span>

			<span class="k">if</span> <span class="nx">horizontal</span> <span class="p">{</span>
				<span class="nx">add</span><span class="p">.</span><span class="nx">X</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="nx">add</span><span class="p">.</span><span class="nx">Y</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
			<span class="p">}</span>

			<span class="nx">next</span> <span class="o">:=</span> <span class="nx">current</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">add</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">!</span><span class="nx">bnd</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">continue</span>
			<span class="p">}</span>

			<span class="nx">pen</span><span class="p">.</span><span class="nf">LineTo</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span>
			<span class="nx">current</span> <span class="p">=</span> <span class="nx">next</span>
			<span class="nx">horizontal</span> <span class="p">=</span> <span class="p">!</span><span class="nx">horizontal</span>
			<span class="nx">i</span><span class="o">++</span>
		<span class="p">}</span>

		<span class="nx">pen</span><span class="p">.</span><span class="nf">Close</span><span class="p">(</span><span class="p">)</span>

		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
			<span class="nx">Target</span><span class="p">:</span> <span class="nx">pen</span><span class="p">,</span>
			<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.001</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span>  <span class="nx">color</span><span class="p">.</span><span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/squiggle_grid.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Tribox2</h2>
  <p>Just for fun.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">ShrinkRect</span>   <span class="p">=</span> <span class="mf">0.003</span>
	<span class="nx">RandPoint</span>    <span class="p">=</span> <span class="mf">0.03</span>
	<span class="nx">CircleRadius</span> <span class="p">=</span> <span class="mf">0.05</span>
	<span class="nx">ShouldStroke</span> <span class="p">=</span> <span class="kc">false</span>
	<span class="nx">StrokeWidth</span>  <span class="p">=</span> <span class="mf">0.001</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span><span class="nx">Rows</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
	<span class="nx">colors</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">l2</span> <span class="o">:=</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">NewLayer</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">mask</span> <span class="o">:=</span> <span class="nx">doc</span><span class="p">.</span><span class="nf">NewLayer</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="nx">ShrinkRect</span><span class="p">)</span>
		<span class="nx">q</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Quad</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">p</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">XYInRect</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="nx">RandPoint</span><span class="p">)</span><span class="p">)</span>

		<span class="nx">tris</span> <span class="o">:=</span> <span class="nx">Triangles</span><span class="p">{</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">C</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">C</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
			<span class="nx">s</span> <span class="o">:=</span> <span class="nx">gfx</span><span class="p">.</span><span class="nf">NewShader</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;a_color&#34;</span><span class="p">,</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span><span class="p">)</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">l2</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="nx">ShouldStroke</span> <span class="p">{</span>
			<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
				<span class="nx">Target</span><span class="p">:</span> <span class="nx">tris</span><span class="p">,</span>
				<span class="nx">Width</span><span class="p">:</span>  <span class="nx">StrokeWidth</span><span class="p">,</span>
				<span class="nx">Color</span><span class="p">:</span>  <span class="nx">White</span><span class="p">,</span>
			<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">l2</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
			<span class="nx">Mesh</span><span class="p">:</span> <span class="nx">Circle</span><span class="p">{</span>
				<span class="nx">XY</span><span class="p">:</span>       <span class="nx">r</span><span class="p">.</span><span class="nf">Center</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
				<span class="nx">Radius</span><span class="p">:</span>   <span class="nx">CircleRadius</span><span class="p">,</span>
				<span class="nx">Segments</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
			<span class="p">}</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span> <span class="nx">Black</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">mask</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Mask</span><span class="p">{</span>
		<span class="nx">Rect</span><span class="p">:</span>   <span class="nx">gfx</span><span class="p">.</span><span class="nx">Fullscreen</span><span class="p">,</span>
		<span class="nx">Source</span><span class="p">:</span> <span class="nx">l2</span><span class="p">,</span>
		<span class="nx">Mask</span><span class="p">:</span>   <span class="nx">mask</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/tribox_2.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Tribox3</h2>
  <p>Just for fun.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="p">(</span>
	<span class="nx">ShrinkRect</span> <span class="p">=</span> <span class="mf">0.019</span>
	<span class="nx">RandPoint</span>  <span class="p">=</span> <span class="mf">0.03</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">White</span><span class="p">)</span>

	<span class="nx">grid</span> <span class="o">:=</span> <span class="nx">Grid</span><span class="p">{</span><span class="nx">Rows</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">Cols</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
	<span class="nx">colors</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Palette</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">cell</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">grid</span><span class="p">.</span><span class="nf">Cells</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">r</span> <span class="o">:=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">Rect</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="nx">ShrinkRect</span><span class="p">)</span>
		<span class="nx">q</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Quad</span><span class="p">(</span><span class="p">)</span>
		<span class="nx">p</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">XYInRect</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nf">Shrink</span><span class="p">(</span><span class="nx">RandPoint</span><span class="p">)</span><span class="p">)</span>
		<span class="nx">p</span> <span class="p">=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">Center</span><span class="p">(</span><span class="p">)</span>

		<span class="c1">//a := q.A.Add(XY{0.009, 0})
</span><span class="c1"></span>		<span class="nx">q</span> <span class="p">=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">TweakQuad</span><span class="p">(</span><span class="nx">q</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">)</span>

		<span class="nx">tris</span> <span class="o">:=</span> <span class="nx">Triangles</span><span class="p">{</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">B</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">C</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">C</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
			<span class="p">{</span><span class="nx">q</span><span class="p">.</span><span class="nx">D</span><span class="p">,</span> <span class="nx">q</span><span class="p">.</span><span class="nx">A</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
			<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span><span class="nx">t</span><span class="p">,</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span><span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/tribox_3.png" width="400" />
    </div>
  </div>
</section>

<section>
  <h2>Voronoi</h2>
  <p>Generating a voronoi mesh.</p>

  <div class="split">
    <div class="left">
      <div class="code"><pre class="chroma"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/buchanae/ink/app&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/color&#34;</span>
	<span class="p">.</span> <span class="s">&#34;github.com/buchanae/ink/dd&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/gfx&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/rand&#34;</span>
	<span class="s">&#34;github.com/buchanae/ink/voronoi&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Ink</span><span class="p">(</span><span class="nx">doc</span> <span class="o">*</span><span class="nx">app</span><span class="p">.</span><span class="nx">Doc</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">rand</span><span class="p">.</span><span class="nf">SeedNow</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">box</span> <span class="o">:=</span> <span class="nx">Rect</span><span class="p">{</span>
		<span class="nx">A</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.1</span><span class="p">}</span><span class="p">,</span>
		<span class="nx">B</span><span class="p">:</span> <span class="nx">XY</span><span class="p">{</span><span class="mf">.9</span><span class="p">,</span> <span class="mf">.9</span><span class="p">}</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="kd">var</span> <span class="nx">initial</span> <span class="p">[</span><span class="p">]</span><span class="nx">XY</span>

	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">20</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">p</span> <span class="o">:=</span> <span class="nb">float32</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">/</span> <span class="mi">20</span>
		<span class="nx">xy</span> <span class="o">:=</span> <span class="nx">box</span><span class="p">.</span><span class="nf">Interpolate</span><span class="p">(</span><span class="nx">XY</span><span class="p">{</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">}</span><span class="p">)</span>
		<span class="nx">initial</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">initial</span><span class="p">,</span> <span class="nx">xy</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">noise</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nx">BlueNoise</span><span class="p">{</span>
		<span class="nx">Limit</span><span class="p">:</span>   <span class="mi">450</span><span class="p">,</span>
		<span class="nx">Spacing</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
		<span class="nx">Initial</span><span class="p">:</span> <span class="nx">initial</span><span class="p">,</span>
		<span class="nx">Rect</span><span class="p">:</span>    <span class="nx">box</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Generate</span><span class="p">(</span><span class="p">)</span>

	<span class="nx">v</span> <span class="o">:=</span> <span class="nx">voronoi</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">noise</span><span class="p">,</span> <span class="nx">box</span><span class="p">)</span>

	<span class="nx">colors</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">RGBA</span><span class="p">{</span>
		<span class="nx">Blue</span><span class="p">,</span> <span class="nx">Yellow</span><span class="p">,</span> <span class="nx">Green</span><span class="p">,</span> <span class="nx">Black</span><span class="p">,</span> <span class="nx">Purple</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="nx">tris</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Triangulate</span><span class="p">(</span><span class="p">)</span>

	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">t</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tris</span> <span class="p">{</span>
		<span class="nx">c</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Color</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span>
		<span class="nx">c</span><span class="p">.</span><span class="nx">A</span> <span class="p">=</span> <span class="mf">0.3</span>
		<span class="nx">gfx</span><span class="p">.</span><span class="nx">Fill</span><span class="p">{</span>
			<span class="nx">Mesh</span><span class="p">:</span>  <span class="nx">t</span><span class="p">,</span>
			<span class="nx">Color</span><span class="p">:</span> <span class="nx">c</span><span class="p">,</span>
		<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">gfx</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">{</span>
		<span class="nx">Target</span><span class="p">:</span> <span class="nf">Triangles</span><span class="p">(</span><span class="nx">tris</span><span class="p">)</span><span class="p">,</span>
		<span class="nx">Width</span><span class="p">:</span>  <span class="mf">0.001</span><span class="p">,</span>
		<span class="nx">Color</span><span class="p">:</span>  <span class="nx">Black</span><span class="p">,</span>
	<span class="p">}</span><span class="p">.</span><span class="nf">Draw</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
    </div>
    <div class="right">
      <img src="assets/snapshots/voronoi.png" width="400" />
    </div>
  </div>
</section>


<section>
  <p>There's more that doesn't have examples here. Check out the <a href="https://godoc.org/github.com/buchanae/ink">docs</a>, the <a href="https://github.com/buchanae/ink/tree/master/sketches">sketches directory</a>, or just browse through <a href="https://github.com/buchanae/ink">the code</a>.</p>
</section>

</body>
</html>
