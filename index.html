<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Ink</title>
  <link rel="stylesheet" href="./assets/style.css" />
</head>

<body>
<h1>Ink</h1>

<div>
  <p>This is a quick and dirty introduction to Ink: a framework for 2D graphics in Go, focused on creative coding, and based on OpenGL.</p>

  <p><em>Disclaimer:</em> Although I've been working towards Ink for years, the project is still very young in many ways. There are many TODOs, bugs, and ugly APIs. I will rewrite and break and (hopefully) improve things over time.</p>


  <p>There's more that doesn't have examples here. Check out the <a href="https://godoc.org/github.com/buchanae/ink">docs</a>, the <a href="https://github.com/buchanae/ink/tree/master/sketches">sketches directory</a>, or just browse through <a href="https://github.com/buchanae/ink">the code</a>.</p>
</div>


<section>
  <h2>Usage</h2>

  <div>
    <p>You'll need <a href="https://golang.org/">Go</a> installed. These docs assume the reader is familiar with programming in Go.</p>

    <p>Install ink:</p>
    <p><span class="code">go install github.com/buchanae/ink</span></p>

		<p>(I'm <em>pretty</em> that should work for you, but if it doesn't please let me know by filing a github issue. If nothing else, you can clone the code and run <span class="code">go install .</span> from the root.)</p>

    <p>Use the "ink" CLI to run a sketch file. This will open a window,
     draw the sketch, and watch for changes.</p>

    <p><span class="code">ink example.go</span></p>
  </div>
</section>


<section>
  <h2>Hello, Triangle</h2>
  <p>The "hello, world" of graphics: a triangle with different colored vertices.</p>

  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    . &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
)

func Ink(doc *app.Doc) {

    t := Triangle{
        XY{0.2, 0.2},
        XY{0.8, 0.2},
        XY{0.5, 0.8},
    }

    s := gfx.NewShader(t)
    s.Set(&#34;a_color&#34;, []RGBA{
        Red, Green, Blue,
    })
    s.Draw(doc)
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/hello_triangle.png" width="400" />
  </div>
</div>

</section>

<section>
  <h2>Basic Shapes</h2>
  <p>The "dd" (like "two d") package holds all the 2D geometry types, and the "gfx" package holds things like "Fill".</p>

  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
)

func Ink(doc *app.Doc) {

    shapes := []gfx.Meshable{

        Rect{
            XY{0.1, 0.7},
            XY{0.3, 0.9},
        },

        Circle{
            XY:     XY{0.5, 0.5},
            Radius: 0.1,
        },

        Triangle{
            XY{.7, .1},
            XY{.8, .3},
            XY{.9, .1},
        },

        Ellipse{
            XY:   XY{.2, .2},
            Size: XY{.15, .1},
        },

        Quad{
            XY{0.65, 0.7},
            XY{0.9, 0.7},
            XY{0.85, 0.95},
            XY{0.7, 0.9},
        },
    }

    for _, s := range shapes {
        gfx.Fill{s, color.Blue}.Draw(doc)
    }
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/basic_shapes.png" width="400" />
  </div>
</div>


</section>

<section>
  <h2>Grid</h2>

  <p>Grids are one of the types I find most useful. This replica of a piece by George Nees demonstrates the Grid utility.</p>

  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    . &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
    &#34;github.com/buchanae/ink/math&#34;
    &#34;github.com/buchanae/ink/rand&#34;
)

const (
    Width  = 16
    Height = 30
)

func Ink(doc *app.Doc) {
    gfx.Clear(doc, White)

    center := XY{.5, .5}
    grid := Grid{
        Rows: Height,
        Cols: Width,
        Rect: RectCenter(center, XY{.5, .9}),
    }

    for i, cell := range grid.Cells() {
        r := cell.Rect
        r = r.Shrink(0.002)

        row := i / Width
        row = Height - row - 5
        dr := float32(row) / Height
        dr = math.Clamp(dr, 0, 1)

        t := dr * 0.01
        r = r.Translate(rand.XYRange(-t, t))

        q := r.Quad()
        ang := rand.Range(-dr, dr)
        q = q.RotateAround(ang, r.Center())

        stk := q.Stroke()
        stk.Width = 0.001

        s := gfx.NewShader(stk)
        s.Draw(doc)
    }
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/grid.png" width="400" />
  </div>
</div>

</section>

<section>
  <h2>Paths</h2>
  <p>Paths are a little broken and buggy at the moment.</p>

  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
)

func Ink(doc *app.Doc) {
    gfx.Clear(doc, color.White)

    p := Path{}
    p.MoveTo(XY{0.2, 0.2})
    p.LineTo(XY{0.2, 0.3})
    p.LineTo(XY{0.3, 0.3})
    p.LineTo(XY{0.5, 0.7})
    p.LineTo(XY{0.7, 0.7})
    p.LineTo(XY{0.7, 0.9})
    p.LineTo(XY{0.5, 0.9})
    p.LineTo(XY{0.3, 0.7})

    m := p.Stroke()
    m.Width = 0.002

    gfx.Fill{m, color.Red}.Draw(doc)
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/paths.png" width="400" />
  </div>
</div>


</section>

<section>
  <h2>Palettes</h2>
  <p>Ink has a bunch of color palettes built in.</p>

  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
    &#34;github.com/buchanae/ink/rand&#34;
)

func Ink(doc *app.Doc) {

    grid := dd.Grid{Rows: 20, Cols: 20}
    palette := rand.Palette()

    for _, cell := range grid.Cells() {
        r := cell.Rect.Shrink(0.003)
        c := rand.Color(palette)
        gfx.Fill{r, c}.Draw(doc)
    }
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/palettes.png" width="400" />
  </div>
</div>


</section>

<section>
  <h2>Image</h2>
  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
)

func Ink(doc *app.Doc) {
    img := doc.LoadImage(&#34;toshiro.png&#34;)
    img.Draw(doc)
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/image.png" width="400" />
  </div>
</div>

</section>

<section>
  <h2>Instances</h2>
  <p>Use OpenGL instancing to efficiently repeat the same shape many times.</p>
  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    . &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
    &#34;github.com/buchanae/ink/rand&#34;
)

func Ink(doc *app.Doc) {
    rand.SeedNow()
    gfx.Clear(doc, White)

    const N = 100000

    pos := make([]XY, N)
    rot := make([]float32, N)
    colors := make([]RGBA, N)
    palette := rand.Palette()

    for i := 0; i &lt; N; i++ {
        pos[i] = rand.XYRange(0.1, 0.9)
        rot[i] = rand.Angle()
        colors[i] = rand.Color(palette)
    }

    doc.AddShader(&amp;gfx.Shader{
        Vert:      gfx.DefaultVert,
        Frag:      gfx.DefaultFrag,
        Instances: N,
        Mesh:      RectWH(0.05, 0.05),
        Attrs: gfx.Attrs{
            &#34;a_pos&#34;:   pos,
            &#34;a_rot&#34;:   rot,
            &#34;a_color&#34;: colors,
        },
        Divisors: map[string]int{
            &#34;a_pos&#34;:   1,
            &#34;a_rot&#34;:   1,
            &#34;a_color&#34;: 1,
        },
    })
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/instances.png" width="400" />
  </div>
</div>

</section>

<section>
  <h2>Blue Noise</h2>
  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    &#34;github.com/buchanae/ink/color&#34;
    &#34;github.com/buchanae/ink/dd&#34;
    . &#34;github.com/buchanae/ink/gfx&#34;
    &#34;github.com/buchanae/ink/rand&#34;
)

func Ink(doc *app.Doc) {
    Clear(doc, color.White)

    r := dd.Rect{
        A: dd.XY{.1, .1},
        B: dd.XY{.9, .9},
    }
    Fill{r, color.Lightgray}.Draw(doc)

    bn := rand.BlueNoise{
        Limit: 5050,
        Rect:  r,
    }
    xys := bn.Generate(rand.Default)

    for _, xy := range xys {
        Dot{XY: xy, Radius: 0.003}.Draw(doc)
    }
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/blue_noise.png" width="400" />
  </div>
</div>

</section>

<section>
  <h2>Voronoi</h2>
  <div class="split">
  <div class="left">
    <div class="code"><pre>package main

import (
    &#34;github.com/buchanae/ink/app&#34;
    &#34;github.com/buchanae/ink/color&#34;
    . &#34;github.com/buchanae/ink/dd&#34;
    &#34;github.com/buchanae/ink/gfx&#34;
    &#34;github.com/buchanae/ink/rand&#34;
    &#34;github.com/buchanae/ink/voronoi&#34;
)

func Ink(doc *app.Doc) {
    rand.SeedNow()
    gfx.Clear(doc, color.White)

    rect := Rect{
        A: XY{.1, .1},
        B: XY{.9, .9},
    }

    bn := rand.BlueNoise{
        Rect:    rect,
        Spacing: 0.05,
        Limit:   400,
    }

    palette := rand.Palette()
    xys := bn.Generate(rand.Default)
    v := voronoi.New(xys, rect)
    tris := v.Triangulate()

    for _, t := range tris {
        c := rand.Color(palette)
        f := gfx.Fill{t, c}
        f.Draw(doc)
    }
}
</pre></div>
  </div>
  <div class="right">
    <img src="./assets/voronoi.png" width="400" />
  </div>
</div>

</section>

<section>
  <p>There's more that doesn't have examples here. Check out the <a href="https://godoc.org/github.com/buchanae/ink">docs</a>, the <a href="https://github.com/buchanae/ink/tree/master/sketches">sketches directory</a>, or just browse through <a href="https://github.com/buchanae/ink">the code</a>.</p>
</section>


</body>
</html>
